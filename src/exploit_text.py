import sys
sys.path.append("/people/sauvage/Documents/")
import os
import logging
import matplotlib.pyplot as plt
import statistics

from resources.stop_words_french import french_stop_words

from collections import Counter

logging.basicConfig(level = logging.INFO)

work_path = "/people/sauvage/Documents/corpus_document_technique/txt"
resources = "/people/sauvage/Documents/resources"
stop_words = french_stop_words()


files = [f.name for f in os.scandir(work_path) if os.path.isfile(f)]
logging.debug(f"{files}")
files_dic = {}
for file in files:
    with open(os.path.join(work_path, file), 'r') as current_file:
        files_dic[file] = current_file.read()

logging.info(f"number of file s= {len(files_dic)}")

len_text = [len(text.split()) for text in files_dic.values()]
len_text.remove(0)
print(len_text)
print(len(len_text))
print(f"moyenne : {statistics.mean(len_text)}")
print(f"mediane : {statistics.median(len_text)}")
# fig, ax = plt.subplots()
# ax.hist(len_text, bins = 20)
# plt.show()

vocab_l = [text.split() for text in files_dic.values()]
vocab = [item.lower() for sublist in vocab_l for item in sublist if item.lower()a not in stop_words]
Counter = Counter(vocab)

print(f"most 10 common words : {Counter.most_common(50)}")